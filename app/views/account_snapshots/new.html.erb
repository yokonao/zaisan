<div class="max-w-2xl mx-auto">
  <div class="bg-white rounded-2xl shadow-xl p-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">残高を記録</h1>
    <p class="text-gray-600 mb-8">
      <%= @account.name || "名称未設定" %> 
      <span class="inline-block px-3 py-1 text-xs font-medium rounded-full ml-2
        <%= case @account.account_type
            when 'mufg' then 'bg-red-100 text-red-700'
            when 'rakuten_sec' then 'bg-purple-100 text-purple-700'
            when 'daiwa_sec' then 'bg-blue-100 text-blue-700'
            else 'bg-gray-100 text-gray-700'
            end %>">
        <%= {'mufg' => '三菱UFJ', 'rakuten_sec' => '楽天証券', 'daiwa_sec' => '大和証券', 'other' => 'その他'}[@account.account_type] %>
      </span>
    </p>
    
    <%= form_with model: [@account, @snapshot], local: true, class: "space-y-6" do |f| %>
      <% if @snapshot.errors.any? %>
        <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg">
          <ul class="list-disc list-inside">
            <% @snapshot.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>
      
      <div>
        <%= f.label :amount, "残高（円）", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <div class="relative">
          <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500">¥</span>
          <%= f.number_field :amount, class: "w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition text-lg", placeholder: "1000000", required: true %>
        </div>
      </div>
      
      <div>
        <%= f.label :recorded_at, "記録日時", class: "block text-sm font-medium text-gray-700 mb-2" %>
        <%= f.datetime_local_field :recorded_at, value: Time.current.strftime('%Y-%m-%dT%H:%M'), class: "w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition", required: true %>
      </div>
      
      <% if @account.latest_snapshot %>
        <div class="bg-blue-50 border border-blue-200 text-blue-700 px-4 py-3 rounded-lg">
          <p class="font-medium">前回の記録</p>
          <p class="text-2xl font-bold mt-1">¥<%= number_with_delimiter(@account.latest_amount) %></p>
          <p class="text-sm mt-1"><%= @account.latest_snapshot.recorded_at.strftime("%Y/%m/%d %H:%M") %></p>
        </div>
      <% end %>
      
      <div class="flex space-x-4">
        <%= f.submit "記録する", class: "flex-1 bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 px-4 rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 transition transform hover:scale-105 cursor-pointer" %>
        <%= link_to "キャンセル", dashboard_path, class: "flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 px-4 rounded-lg font-medium text-center transition" %>
      </div>
    <% end %>
  </div>
</div>
